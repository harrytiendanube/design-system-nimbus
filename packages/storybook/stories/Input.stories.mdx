import { Meta, Story, Props, Preview } from "@storybook/addon-docs/blocks";
import {
  withKnobs,
  text,
  select,
  number,
  boolean,
} from "@storybook/addon-knobs";
import { withA11y } from "@storybook/addon-a11y";

import { Input, Text } from "@tiendanube/components/src";
import { ArrowRightIcon, EyeIcon } from "@tiendanube/icons";
import { LOREM_STRESS } from "./utils/constants";

import "../utils/style.css";

<Meta title="Atomic components/Input" component={Input} />

# Input

TODO: complete

<Preview>
  <Story name="default" parameters={{ decorators: [withKnobs, withA11y] }}>
    {() => {
      const [value, setValue] = React.useState("");
      return (
        <Input
          type={select("type", [
            "text",
            "tel",
            "number",
            "password",
            "email",
            "search",
            "color",
          ])}
          appearance={select("appearance", [
            "default",
            "warning",
            "danger",
            "validation_loading",
            "validation_success",
            "validation_error",
          ])}
          helpText={text("helpText", "some helper text")}
          value={value}
          label={text("label", "Label")}
          placeholder={text("placeholder", "placeholder")}
          multiRows={boolean("multiRows", false)}
          rows={number("rows", 1)}
          focused={boolean("focused", false)}
          autoCapitalize={boolean("autoCapitalize", false)}
          autoCorrect={boolean("autoCorrect", false)}
          name="name"
          onChange={(e) => setValue(e.value)}
          disabled={boolean("disabled", false)}
          readOnly={boolean("readOnly", false)}
          autoSelect={boolean("autoSelect", false)}
        />
      );
    }}
  </Story>
</Preview>

## Properties

<Props of={Input.type} />
<Text>
  - Parameters <Text appearance="primary">prependIcon </Text> and{" "}
  <Text appearance="primary"> prependLabel </Text> parameters are mutually
  exclusive
</Text>
<Text>
  - Parameters can not be used <Text appearance="primary">prependLabel</Text>,{" "}
  <Text appearance="primary">appendLabel</Text>,{" "}
  <Text appearance="primary">prependIcon</Text> with{" "}
  <Text appearance="primary">type=&apos;search&apos;</Text>
</Text>

## Type search

TODO: complete

<Preview withToolbar>
  <Story name="type search" parameters={{ decorators: [withKnobs, withA11y] }}>
    {() => {
      const [value, setValue] = React.useState("");
      return (
        <Input
          type="search"
          appearance={select("appearance", [
            "default",
            "warning",
            "danger",
            "validation_loading",
            "validation_success",
            "validation_error",
          ])}
          helpText={text("helpText", "some helper text")}
          placeholder="placeholder"
          name="name"
          value={value}
          onChange={(e) => setValue(e.value)}
          onSubmit={() => setValue("")}
        />
      );
    }}
  </Story>
</Preview>

## With prepend icon

<Preview withToolbar>
  <Story name="with prepend icon">
    {() => {
      const [value, setValue] = React.useState("");
      return (
        <Input
          label="Label"
          prependIcon={ArrowRightIcon}
          value={value}
          type={select("type", [
            "text",
            "tel",
            "number",
            "password",
            "email",
            "search",
            "color",
          ])}
          appearance={select("appearance", [
            "default",
            "warning",
            "danger",
            "validation_loading",
            "validation_success",
            "validation_error",
          ])}
          helpText={text("helpText", "some helper text")}
          placeholder="placeholder"
          name="name"
          onChange={(e) => setValue(e.value)}
        />
      );
    }}
  </Story>
</Preview>

## With prepend / append label

<Preview withToolbar>
  <Story name="with prepend / append label">
    {() => {
      const [values, setValues] = React.useState({ a: "", b: "", c: "" });
      const handleChange = (event) => {
        const { name, value } = event;
        setValues((prevState) => ({
          ...prevState,
          [name]: value,
        }));
      };
      return (
        <>
          <Input
            label="Label"
            appearance={select("appearance", [
              "default",
              "warning",
              "danger",
              "validation_loading",
              "validation_success",
              "validation_error",
            ])}
            type={select("type", [
              "text",
              "tel",
              "number",
              "password",
              "email",
              "search",
              "color",
            ])}
            helpText={text("helpText", "some helper text")}
            prependLabel={select("prependLabel", ["$", "R$", "U$S"], "$")}
            appendLabel={select("appendLabel", ["cm", "kg"], "cm")}
            inputMode="decimal"
            value={values.a}
            placeholder="placeholder"
            name="a"
            onChange={handleChange}
            disabled={boolean("disabled", false)}
          />
          <br />
          <Input
            label="Label"
            prependLabel={select("prependLabel2", ["$", "R$", "U$S"], "U$S")}
            appearance={select("appearance", [
              "default",
              "warning",
              "danger",
              "validation_loading",
              "validation_success",
              "validation_error",
            ])}
            helpText={text("helpText", "some helper text")}
            inputMode="decimal"
            value={values.b}
            placeholder="placeholder"
            name="b"
            onChange={handleChange}
            disabled={boolean("disabled", false)}
          />
          <br />
          <Input
            label="Label"
            appearance={select("appearance", [
              "default",
              "warning",
              "danger",
              "validation_loading",
              "validation_success",
              "validation_error",
            ])}
            helpText={text("helpText", "some helper text")}
            appendLabel={select("appendLabel2", ["cm", "kg"], "kg")}
            inputMode="decimal"
            value={values.c}
            placeholder="placeholder"
            name="c"
            onChange={handleChange}
            disabled={boolean("disabled", false)}
          />
        </>
      );
    }}
  </Story>
</Preview>

## Input with icon label

TODO: complete

<Preview withToolbar>
  <Story
    name="with icon label"
    parameters={{ decorators: [withKnobs, withA11y] }}
  >
    {() => {
      const [value, setValue] = React.useState("");
      return (
        <Input
          label="input label"
          appearance={select("appearance", [
            "default",
            "warning",
            "danger",
            "validation_loading",
            "validation_success",
            "validation_error",
          ])}
          helpText={text("helpText", "some helper text")}
          labelIcon={EyeIcon}
          placeholder="placeholder"
          name="name"
          value={value}
          onChange={(e) => setValue(e.value)}
          onSubmit={() => setValue("")}
        />
      );
    }}
  </Story>
</Preview>

## Stressed

TODO: complete

<Preview withToolbar>
  <Story name="stressed">
    {() => {
      const [value, setValue] = React.useState("");
      return (
        <Input
          label={LOREM_STRESS}
          value={value}
          name="name"
          placeholder="placeholder"
          onChange={(e) => setValue(e.value)}
        />
      );
    }}
  </Story>
</Preview>
